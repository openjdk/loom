Test: hotspot/jtreg :tier1_runtime

Source info:

commit 0c1d2d02bbe2d94909ddca7d74b74b2c166f473e (HEAD -> jom-master-merge)
Merge: d285c088a4e bb377b26730
Author: David Holmes <david.holmes@oracle.com>
Date:   Tue Jun 13 21:28:21 2023 -0400

    Merge

Test results: passed: 603; failed: 16; error: 3

1. runtime/logging/MonitorInflationTest.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: 'inflate(has_locker):' missing from stdout/stderr

Test not applicable to JOM: No native monitor inflation so logging is not present

2. runtime/Thread/AsyncExceptionOnMonitorEnter.java: Failed. Execution failed: `main' threw exception: java.lang.Error: Unexpected: java.lang.InterruptedException: sleep interrupted
  or
runtime/Thread/AsyncExceptionOnMonitorEnter.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-vthread-fix/images/jdk/bin/java' timed ou

3. runtime/Thread/StopAtExit.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Unexpected: java.lang.InterruptedException

These may not be JOM specific. There is some strangeness happening with failure to deliver an async exception and instead we respond to the interrupt that is part of the StopThread action.

4. runtime/Unsafe/InternalErrorTest.java: Failed. Execution failed: `main' threw exception: java.lang.InternalError: a fault occurred in an unsafe memory access operation

Also appears to be an issue with async exception delivery. The InternalError gets thrown outside the test code.

5. runtime/Thread/TestThreadDumpClassInitMonitor.java: Failed. Execution failed: `main' threw exception: java.lang.Error: Unexpected initial stack line: "TestThread" #12 prio=5 os_prio=0 cpu=1.03ms elapsed=0.89s tid=0x00007feee8027e80 nid=2094 runnable [0x00007fef303ba000]

Intermittent. Stack has changed with JOM, so test needs adjusting.

6. runtime/BootClassAppendProp/BootClassPathAppend.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: 'java.lang.Object' missing from stdout/stderr

Won't work in interpreted mode

7. runtime/exceptionMsgs/NullPointerException/NullPointerExceptionTest.java#id0: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Got null but expected this message: "Cannot enter synchronized block because "this.nullInstanceField" is null".
8. runtime/exceptionMsgs/NullPointerException/NullPointerExceptionTest.java#id1: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Got null but expected this message: "Cannot enter synchronized block because "this.nullInstanceField" is null".

JOM changes the NPE error message as we throw directly from Java code not from in the VM.

9.  runtime/handshake/HandshakeDirectTest.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-vthread-fix/images/jdk/bin/java' timed out

Intermittent

10. runtime/HiddenClasses/GCHiddenClass.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-jom-master-merge/images/jdk/bin/java' timed out

Intermittent. May not be suitable for interpreter mode

11. runtime/HiddenClasses/TestHiddenClassUnloading.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Background compilation enabled

Won't work in interpreted mode

12. runtime/logging/loadLibraryTest/LoadLibraryTest.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-jom-master-merge/images/jdk/bin/java' timed out (timeout set to 1800000ms, elapsed time including timeout handling was 1800688ms).

Intermittent. Unknown failure mode.

13.  runtime/memory/LargePages/TestLargePagesFlags.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-vthread-fix/images/jdk/bin/java' timed out

Intermittent. Seems stuck at safepoint.

14 - 17. runtime/Monitor/DeflationIntervalsTest.java#guaranteed_threshold_noSafepoint: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: 'Async deflation needed: monitors used are above the threshold' missing from stdout/stder
18. runtime/Monitor/MonitorUsedDeflationThresholdTest.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Did not find too_many string in output.

Not applicable for JOM: no deflation

19. runtime/Monitor/SyncOnValueBasedClassTest.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: 'fatal error: Synchronizing on object' missing from stdout/stderr

This check may be missing in the JOM prototype.

20. runtime/NMT/MallocLimitTest.java#compiler-limit-fatal: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Unexpected to get exit value of [0]
21. runtime/NMT/MallocLimitTest.java#compiler-limit-oom: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Unexpected to get exit value of [0]

Won't work in interpreted mode.

21. runtime/reflect/ReflectOutOfMemoryError.java: Error. Program `/scratch/users/daholme/loom-jom/build/linux-x64-debug-vthread-fix/images/jdk/bin/java' timed out

Intermittent. Appears to be stuck at safepoint

22. runtime/whitebox/TestWBDeflateIdleMonitors.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Expected to get exit value of [0]

Not applicable for JOM: no deflation


----------------------------------------------------------
           VERY OLD RESULTS BELOW!
----------------------------------------------------------

hotspot/jtreg: vmTestbase/nsk/jvmti/

Build info: jom-master with JNI locking changes

Test results: passed: 628; failed: 19


2022-02-24T02:50:02-0500 Test finished: vmTestbase/nsk/jvmti/CompiledMethodUnload/compmethunload001/TestDescription.java: Failed. Execution failed: `main' threw exception: nsk.share.Failure: PRODUCT BUG: class was not unloaded in 5
2022-02-24T03:14:25-0500 Test finished: vmTestbase/nsk/jvmti/GetCurrentContendedMonitor/contmon001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:15:41-0500 Test finished: vmTestbase/nsk/jvmti/GetFrameCount/framecnt001/TestDescription.java: Failed. Execution failed: `main' threw exception: java.lang.AssertionError: [/scratch/users/daholme/jdk-dev4.git/build/linux-x64-debug-jni-entry/images/jdk/bin/java, -cp, /scratch/users/daholme/jdk-dev4.git/open/test/hotspot/jtreg/JTwork/classes/vmTestbase/nsk/jvmti/GetFrameCount/framecnt001/TestDescription.d:/scratch/users/daholme/jdk-dev4.git/open/test/hotspot/jtreg/JTwork/classes/vmTestbase:/scratch/users/daholme/jdk-dev4.git/open/test/hotspot/jtreg/JTwork/classes/test/lib, -Djava.library.path=/scratch/users/daholme/jdk-dev4.git/build/linux-x64-debug-jni-entry/images/test/hotspot/jtreg/native, -agentlib:framecnt001, nsk.jvmti.GetFrameCount.framecnt001] exit code is 97
2022-02-24T03:15:58-0500 Test finished: vmTestbase/nsk/jvmti/GetFrameLocation/frameloc001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:18:45-0500 Test finished: vmTestbase/nsk/jvmti/GetObjectMonitorUsage/objmonusage001/TestDescription.java: Failed. Unexpected exit from test [exit code: 134]
2022-02-24T03:18:53-0500 Test finished: vmTestbase/nsk/jvmti/GetObjectMonitorUsage/objmonusage003/TestDescription.java: Failed. Unexpected exit from test [exit code: 134]
2022-02-24T03:18:58-0500 Test finished: vmTestbase/nsk/jvmti/GetObjectMonitorUsage/objmonusage004/TestDescription.java: Failed. Unexpected exit from test [exit code: 134]
2022-02-24T03:19:06-0500 Test finished: vmTestbase/nsk/jvmti/GetObjectMonitorUsage/objmonusage006/TestDescription.java: Failed. Unexpected exit from test [exit code: 134]
2022-02-24T03:19:18-0500 Test finished: vmTestbase/nsk/jvmti/GetOwnedMonitorInfo/ownmoninf001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:26:36-0500 Test finished: vmTestbase/nsk/jvmti/NotifyFramePop/nframepop001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:52:34-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/bcinstr/BI04/bi04t002/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:53:31-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/capability/CM01/cm01t011/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:54:32-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/contention/TC01/tc01t001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:59:37-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/contention/TC02/tc02t001/TestDescription.java: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Timeout in waiting for a MonitorContendedEnter event
2022-02-24T03:59:42-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/contention/TC03/tc03t001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T03:59:47-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/contention/TC03/tc03t002/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T04:48:11-0500 Test finished: vmTestbase/nsk/jvmti/scenarios/multienv/MA08/ma08t001/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T04:54:26-0500 Test finished: vmTestbase/nsk/jvmti/StopThread/stopthrd007/TestDescription.java: Failed. Execution failed: Execution failed
2022-02-24T04:58:19-0500 Test finished: vmTestbase/nsk/jvmti/unit/functions/nosuspendMonitorInfo/JvmtiTest/TestDescription.java: Failed. Execution failed: Execution failed


----------------------------------------------------------

hotspot/jtreg: :tier1_compiler

Build info: Unclear - Dec 2, 2021

Test results: passed: 605; failed: 24; error: 8

1. compiler/c2/Test6857159.java

java.lang.AssertionError: public void compiler.c2.Test6857159$ct0.run() didn't get compiled

2.compiler/c2/TestShiftRightAndAccumulate.java#id0

Timed out

3. compiler/c2/TestUnsignedByteCompare1.java

Timed out

4. compiler/codecache/CheckSegmentedCodeCache.java

java.lang.RuntimeException: 'Not enough space in non-nmethod code heap to run VM' missing from stdout/stderr

5. compiler/codecache/OverflowCodeCacheTest.java

java.lang.RuntimeException: Compilation must be disabled when CodeCache(CodeHeap) overflows: expected 1 to not equal 1

6.compiler/gcbarriers/EqvUncastStepOverBarrier.java

WB error: invalid compilation level 4

7. compiler/intrinsics/IntrinsicAvailableTest.java

java.lang.RuntimeException: Unexpected result: intrinsic for java.util.zip.CRC32.update() is enabled but intrinsic is not available at compilation level 4

8. compiler/intrinsics/IntrinsicDisabledTest.java

java.lang.RuntimeException: Intrinsic for [public native void jdk.internal.misc.Unsafe.putChar(java.lang.Object,long,char)] is not available globally although it should be.


9.compiler/arraycopy/TestArrayCopyNoInitDeopt.java

WB error: invalid compilation level 4

10.compiler/arraycopy/TestDefaultMethodArrayCloneDeoptC2.java

WB error: invalid compilation level 4

11.compiler/c2/cr7200264/TestSSE2IntVect.java

Unexpected AndV number: expected 0 >= 3

12.compiler/c2/cr7200264/TestSSE4IntVect.java

Unexpected MulVI number: expected 0 >= 2

13.compiler/classUnloading/methodUnloading/TestMethodUnloading.java

java.lang.RuntimeException: Background compilation enabled

14.compiler/codecache/cli/codeheapsize/TestCodeHeapSizeOptions.java

AssertionError: Option 'NonNMethodCodeHeapSize' is expected to have '20971520' value

15.compiler/codecache/cli/printcodecache/TestPrintCodeCacheOption.java

AssertionError: Expected message not found: 'CodeHeap 'non-profiled nmethods': size=40960Kb used=[0-9]+Kb max_used=[0-9]+Kb free=[0-9]+Kb'.

16.compiler/dependencies/MonomorphicObjectCall/TestMonomorphicObjectCall.java

Method [java.lang.Object.notify()V] is annotated with @IntrinsicCandidate, but no compiler intrinsic is defined for the method. Exiting.

17.compiler/inlining/InlineAccessors.java

RuntimeException: 'InlineAccessors::setBool (6 bytes) accessor' missing from stdout/stderr

18.compiler/inlining/PrintInlining.java

Exception: '-XX:+PrintInlining' didn't print virtual call.

19.compiler/intrinsics/klass/CastNullCheckDroppingsTest.java

TESTBUG: Background compilation enabled

20.compiler/intrinsics/string/TestStringIntrinsics.java

Timeout refired 3600 times

21. compiler/intrinsics/string/TestStringLatin1IndexOfChar.java

Timeout refired 1800 times

22.compiler/intrinsics/unsafe/DirectByteBufferTest.java

Timeout refired 1800 times

23.compiler/intrinsics/unsafe/HeapByteBufferTest.java

Timeout

24. compiler/jsr292/ContinuousCallSiteTargetChange.java

timeout

25. compiler/jsr292/MHInlineTest.java

RuntimeException: 'compiler.jsr292.MHInlineTest$B::public_x (3 bytes)   inline (hot)' missing from stdout/stderr

26.compiler/locks/TestNestedLocksElimination.java

Timeout refired 1800 times

27.compiler/regalloc/TestC2IntPressure.java

Error: test method didn't get compiled

28.compiler/runtime/criticalnatives/argumentcorruption/CheckLongArgs.java

Exception: critical native lookup failed

29.compiler/runtime/criticalnatives/lookup/LookUp.java

Exception: critical native lookup failed

30.compiler/uncommontrap/Test8009761.java

RuntimeException: Background compilation enabled

31.compiler/unsafe/UnsafeGetConstantField.java

RuntimeException: direct read doesn't return prev value: expected true to equal false

32.compiler/unsafe/UnsafeGetStableArrayElement.java

RuntimeException: assertEquals: expected true to equal false
